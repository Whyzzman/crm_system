{% extends "crm/base.html" %}

{% block title %}Список кур’єрів{% endblock %}

{% block content %}

<h2>Список кур’єрів</h2>

<form method="get" class="mb-3 d-flex gap-2">
  <input type="text" name="q" value="{{ search_name }}" placeholder="Пошук по імені" class="form-control">

  <select name="available" class="form-select">
    <option value="">Всі</option>
    <option value="1" {% if availability == '1' %}selected{% endif %}>Вільні</option>
    <option value="0" {% if availability == '0' %}selected{% endif %}>Зайняті</option>
  </select>

  <button class="btn btn-secondary" type="submit">Пошук</button>
</form>

{% if user.is_authenticated %}
<table class="table table-striped table-hover">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Ім’я</th>
      <th>Телефон</th>
      <th>Доступність</th>
    </tr>
  </thead>
  <tbody>
    {% for courier in couriers %}
    <tr>
      <td>{{ courier.id }}</td>
      <td>{{ courier.name }}</td>
      <td>{{ courier.phone }}</td>
      <td>{% if courier.available %}Вільний{% else %}Зайнятий{% endif %}</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4" class="text-center">Немає кур’єрів</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>Увійдіть, щоб переглянути список кур’єрів</p>
{% endif %}
{% endblock %}